<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>添加用户(业主)管理</title>
    <include file='Public:common_file' />
</head>
<body class="gray-bg">
    <div class="wrapper wrapper-content animated">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>添加用户(业主)管理</h5>
                        <div class="ibox-tools">
                        </div>
                    </div>
                    <div class="ibox-content">
                        <form method="post" class="form-horizontal m-t" id="mainForm" data-NoClientValidate="1">
                            <div class="form-group">
                                <label class="col-sm-3 control-label">住户名称：</label>
                                <div class="col-sm-8">
                                    <input placeholder="请输入住户姓名" name="real_name" class="form-control" type="text"  value="{$info['real_name']}" required="true" > 
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">手机号：</label>
                                <div class="col-sm-8">
                                    <input placeholder="请输入手机号" name="phone" class="form-control" type="text" required="true" number='true' value="{$info.phone}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">身份证号：</label>
                                <div class="col-sm-8">
                                    <input placeholder="请输入身份证号" name="id_card" class="form-control" type="text" required="true" number='true' value="{$info.id_card}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">登录密码：</label>
                                <div class="col-sm-8">
                                    <input placeholder="请输入用户密码" name="password" class="form-control" type="text" required="true" number='true' value="{$info.password}">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">性别：</label>
                                <div class="col-sm-8">
                                    <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="sex" value="1" > 男
                                    </label>
                                    <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="sex" value="0" > 女
                                    </label>
                                    <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="sex" value='2' checked=""> 保密
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                    <label class="col-sm-3 control-label">出生日期：</label>
                                    <div class="col-sm-8">
                                        <input class="form-control" name="birthdate" placeholder="YYYY-MM-DD" onclick="laydate({istime: true, format: 'YYYY-MM-DD'})">
                                    </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">所在社区：</label>
                                <div class="col-sm-8">
                                <select style="width: 200px;" class="form-control" id = "communityid" name = "communityid" onchange="getSltValue()">
                                    <option selected="" value = "" >请选择社区</option>
                                    <volist name="mname" id="volist">
                                        <option value="{$volist.id}">{$volist.name}</option>
                                    </volist>
                                </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">房屋号：</label>
                                <div class="col-sm-8">
                                    <div class="chzn-container chzn-container-single" id="house_id" name="house_id" data-url="{:U('ajax_getHouse')}" data-cond="" style="float:left;">
                                      <input type="hidden" class="area_data" name="house_name" value="" data-id=""/>
                                      <input type="hidden" class="houseid" name="houseid" value=""/>
                                      <a tabindex="0" href="javascript:void(0);" class="showsel chzn-single chzn-single-with-drop" style="height:34px;">
                                        <span class="selItem" style="">--请选择--</span>
                                        <span class="loading"></span>
                                      </a>
                                      <div class="chzn-drop detail" style="">
                                        <div class="chzn-search ">
                                          <input class="searchKey"  tabindex="-1" style="" type="text" oninput="propertychange(this)" onpropertychange="propertychange(this)" placeholder="请输入关键词查询"  />
                                          <!-- <input type="hidden" name="id" value="1"> -->
                                        </div>
                                        <ul class="itemList chzn-results"></ul>
                                      </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="col-sm-3 control-label">是否启用</label>
                                <div class="col-sm-8">
                                    <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="status" value='1' checked=""> 启用
                                    </label>
                                        <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="status" value='0'> 不启用
                                        </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-3 control-label">是否为业主</label>
                                <div class="col-sm-8">
                                    <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="isproprietor" value="1" checked="">业主
                                    </label>
                                        <label class="checkbox-inline i-checks">
                                        <input type="radio" required="true" name="isproprietor" value="0" > 非业主
                                        </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-8 col-sm-offset-3">
                                    <button class="btn btn-primary" type="button" onclick="btn_submit()">提交</button>
                                </div>
                            </div>
                            <input type="hidden" id="" name="id" value="{$info.id}" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <include file='Public:common_js' />
    <!-- jQuery Validation plugin javascript begin-->
    <script src="__PUBLIC__/hplus/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="__PUBLIC__/hplus/js/plugins/validate/messages_zh.min.js"></script>
    <script type="text/javascript">
        $(function (){
            //验证提示信息
            $("#mainForm").validate({
                messages: {
                  real_name: {
                    required: "请输入住户姓名"
                  },
                  phone: {
                    required: "请输入手机号",
                    number: "手机号必须为数字",
                  },
                  date: {
                    required: "请输入时间",
                    date: "请填入正确的时间格式,如1998/01/22，2009-06-23"
                  }
                }
            }); 
        });
    </script>
    <!-- jQuery Validation plugin javascript end-->

    <!--弹出层组件 begin-->
    <link href="__PUBLIC__/hplus/css/plugins/sweetalert/sweetalert.css" rel="stylesheet">
    <script src="__PUBLIC__/hplus/js/plugins/sweetalert/sweetalert.min.js"></script>
    <!--弹出层组件 end-->
    
    <!--jquery form begin-->
    <script type="text/javascript" src="__PUBLIC__/system/js/jquery.form.js"></script>
    <!--jquery form end-->
    
    <!--layer begin-->
    <script src="__PUBLIC__/hplus/js/plugins/layer/layer.min.js"></script>
    <!--layer end-->
    
    <script type="text/javascript" src="__PUBLIC__/system/js/form-common.js"></script>
    
    <script type="text/javascript">
        function btn_submit(){
            var dataid = $(".area_data").data("id");
            $(".houseid").val(dataid);
            $("#mainForm").submit();
        }
    </script>
    <!--iCheck begin-->
    <link href="__PUBLIC__/hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
    <script src="__PUBLIC__/hplus/js/plugins/iCheck/icheck.min.js"></script>
    <script>
        $(document).ready(function () {
            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-green',
                radioClass: 'iradio_square-green',
            });
        });
    </script>
    <!--iCheck end-->

    <!--layerDate 日历控件 bengin-->
        <script src="__PUBLIC__/hplus/js/plugins/layer/laydate/laydate.js"></script>
        <script type="text/javascript"></script>
    <!--layerDate 日历控件 end-->
     <!--即时请求‘下拉框’组件 begin-->
    <link href="__PUBLIC__/hplus/css/plugins/chosen/chosen_change/chosen.css" rel="stylesheet">
    <!-- ajax下拉样式强制 begin -->
    <style type="text/css">
        .chzn-container .showsel {
            width:290px;
            float:left;
            display:block;
            height:28px;
            border-radius:0px;
            border:1px #d5d5d5 solid;
            background-image:-webkit-gradient(linear,0 0,0 100%,color-stop(20%,#ffffff),color-stop(50%,#ffffff),color-stop(52%,#ffffff),color-stop(100%,#ffffff));
        }
        .chzn-container .selItem{
            float:left;
            font-size:12px;
            color:#000;
            line-height:30px;
        }
        .chzn-container .loading {
            display:block;
            float:right;
        }
        .chzn-container .detail {
            border: 1px #d5d5d5 solid;
            border-top: none;
            width:290px;
            top:24px;
            display:none;
            padding-right: 6px;
        }
        .searchKey{
            width: 268px;
        }
    </style>
    <!-- ajax下拉样式强制 end -->
    <!-- 下拉自行封装js begin -->
    <script src="__PUBLIC__/Common/search.js"></script>
    <script type="text/javascript">
    $(function() {
        // ajax即时查询
        $(".showsel").bind('click',function(){
            clickShowSel(this);           
        });
    });
    </script>
    <!-- 下拉自行封装js end -->
    <!--即时请求‘下拉框’组件 end-->

    <script type="text/javascript">
        function getSltValue() {
            // alert(document.getElementById("community").value);
            // var id = document.getElementById("community").value;
            var communityid = $("#communityid").val();
            $("#house_id").data("cond",communityid);
        }
    </script>

</body>
</html>

